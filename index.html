<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css"> 
    <title>Document</title>
</head>
<body>
    <div class="jumbotron">
  <h1 class="display-4">Weather Dashboard</h1>
    <hr class="my-1">
    </div>
    <div class="container">
        <br>
    <div id="  SearchField" class=" row S4C">
    <H3>Search for a City:</H3>    
    </div>
    <div class = "col" md-3></div>
    <nav class="navbar navbar-light bg-light">
        <form class="form-inline">
          <input class="form-control mr-sm-1 searchField" type="search" placeholder="Search" aria-label="Search" >
          <button id="citySearch" class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
      </nav>
 <!--     <div class="card" style="width: 18rem;">
        <ul class="list-group list-group-flush history">
          <li class="list-group-item city1">Cras justo odio</li>
          <li class="list-group-item city2">Dapibus ac facilisis in</li>
          <li class="list-group-item city3">Vestibulum at eros</li>
          <li class="list-group-item city4">Cras justo odio</li>
          <li class="list-group-item city5">Dapibus ac facilisis in</li>
          <li class="list-group-item city6">Vestibulum at eros</li>        
          <li class="list-group-item city7">Dapibus ac facilisis in</li>
          <li class="list-group-item city8">Vestibulum at eros</li>
        </ul>
      </div>
      <div class="card mb-3" style="max-width: 540px;">
        <div class="row no-gutters">
          <div class="col-md-4">
        
         </div> -->

          <div id="currentWeather">
          <div class="col-md-9" style="max-width: 760px;">
            <div class="card-body">
              <p class="card-text"></p>
              <p class="card-text"><small class="text-muted"></small></p>
              <div class="city"></div>
  <div class="wind"></div>
  <div class="humidity"></div>
  <div class="temp"></div>
  <div class="tempF"></div> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">
  function cityHistory(text){
    var list = $("<li>").addClass("list-group-item").text(text)
$(".history").append(list)
  }
  function WeatherFunction (searchVal){
  window.localStorage.setItem("pastSearch", searchVal)
  
  
  
  var APIKey = "166a433c57516f51dfab1f7edaed8413";

  var queryURL = "https://api.openweathermap.org/data/2.5/weather?" +
      "q=" + searchVal + "&appid=" + APIKey;
 + "&units=imperial"

  
    $.ajax({
      url: queryURL,
      method: "GET"
    })
      .then(function(response) {

        



        $(".city").html("<h1>" + response.name + " Weather Details</h1>");
        $(".wind").text("Wind Speed: " + response.wind.speed);
        $(".humidity").text("Humidity: " + response.main.humidity);
        
      
        var tempF = (response.main.temp - 273.15) * 1.80 + 32;

      
        $(".temp").text("Temperature (K) " + response.main.temp);
        $(".tempF").text("Temperature (F) " + tempF.toFixed(2));

      
      });
  }
  function forecastFunction (searchVal){
  
  var day1
  var day2
  var day3
  var day4 
  var day5
  
  var APIKey = "166a433c57516f51dfab1f7edaed8413";

  var queryURL = "https://api.openweathermap.org/data/2.5/forecast?" +
      "q=" + searchVal + "&appid=" + APIKey;
 + "&units=imperial"

  
    $.ajax({
      url: queryURL,
      method: "GET"
    })
      .then(function(response) {

        

console.log(response)
console.log(response.city)

      for (var i=0; i<response.list.length; i++){
        
        if(response.list[i].dt_txt.indexOf("15:00:00") !== -1){ 
          console.log(response.list[i])
          var card=$('<div>').addClass("card bg-primary")
          var body=$("<div>").addClass("card-body")

          var title = $("<h5>").addClass("card-title").text(new Date(response.list[i].dt_txt).toLocaleDateString());
          var max = $("<p>").addClass("card-text").text(response.list[i].main.temp_max)
           $(".card-deck").append(card.append(body.append(title, max)))
          //var deck = ("<div>").addClass("card-deck card-body card-text").append(title, max)

      }
      }
      
      });
  }
      $("#citySearch").on("click", function(event) {
          event.preventDefault()
          var searchVal = $(".searchField").val()

var searchHistory = window.localStorage.getItem("pastSearch")||[]
if (searchHistory.length > 0) {
    WeatherFunction(searchHistory[searchHistory.length-1]);
  }
  for (var i = 0; i < searchHistory.length; i++) {
    cityHistory(searchHistory[i]);
  }
WeatherFunction(searchVal)
forecastFunction(searchVal)

      })

  </script>
               
<div>
    
  <div class="card-deck">
    <!--visual of what needs to be done 
    <div class="card bg-danger day1">
      <div class="card-body text-center">
        <p class="card-text"></p>
      </div>
    </div>
    <div class="card bg-primary day2">
      <div class="card-body text-center">
        <p class="card-text">Some text inside the second card</p>
      </div>
    </div>
    <div class="card bg-primary day3">
      <div class="card-body text-center">
        <p class="card-text">Some text inside the third card</p>
      </div>
    </div>
    <div class="card bg-primary day4">
      <div class="card-body text-center">
        <p class="card-text">Some text inside the fourth card</p>
      </div>
    </div>
    <div class="card bg-primary">
      <div class="card-body text-center day5">
        <p class="card-text">Some text inside the fourth card</p>-->
              </div>
  </div>
 </div>
    
    
    
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script type="text/javascript">
       


      

    
  






     
        



</script>
</body>
<footer class ="fixed-bottom">

</html>